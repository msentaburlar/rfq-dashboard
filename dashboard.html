<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RFQ-Dashboard 2020â€“2024</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#f5f7fa;color:#333;padding:20px}
.container{max-width:1400px;margin:0 auto}
h1{text-align:center;color:#2c3e50;margin-bottom:20px;font-size:1.8rem}
.filters{background:#fff;padding:15px 20px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:20px;display:flex;flex-wrap:wrap;gap:15px;align-items:center}
.filter-group{display:flex;align-items:center;gap:8px}
.filter-group label{font-weight:600;color:#555}
.filter-group select{padding:8px 12px;border:2px solid #ddd;border-radius:6px;font-size:14px;min-width:140px}
.filter-group select:disabled{background:#eee;cursor:not-allowed}
.btn{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:700;cursor:pointer;transition:all 0.2s}
.btn-primary{background:#3498db;color:#fff}
.btn-primary:hover{background:#2980b9}
.btn-danger{background:#e74c3c;color:#fff}
.btn-danger:hover{background:#c0392b}
.status-box{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:15px 20px;border-radius:10px;margin-bottom:20px;font-size:1rem;text-align:center;box-shadow:0 4px 15px rgba(102,126,234,0.4)}
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:20px}
.kpi-card{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1);text-align:center}
.kpi-card h3{font-size:0.9rem;color:#666;margin-bottom:10px;text-transform:uppercase;letter-spacing:1px}
.kpi-value{font-size:2.2rem;font-weight:700}
.kpi-blue .kpi-value{color:#3498db}
.kpi-green .kpi-value{color:#2ecc71}
.kpi-red .kpi-value{color:#e74c3c}
.kpi-orange .kpi-value{color:#f39c12}
.kpi-sub{display:flex;justify-content:center;gap:20px;margin-top:10px;font-size:0.85rem}
.kpi-sub span{display:flex;flex-direction:column;align-items:center}
.kpi-sub .label{color:#888;font-size:0.75rem}
.kpi-diff{margin-top:10px;padding:8px;border-radius:6px;font-weight:600}
.kpi-diff.positive{background:#d4edda;color:#155724}
.kpi-diff.negative{background:#f8d7da;color:#721c24}
.charts-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px;margin-bottom:20px}
.chart-card{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
.chart-card h3{font-size:1rem;color:#2c3e50;margin-bottom:15px;text-align:center}
.chart-container{width:100%;overflow-x:auto}
svg{display:block;margin:0 auto}
.table-container{background:#fff;border-radius:10px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1);overflow-x:auto}
.table-container h3{font-size:1rem;color:#2c3e50;margin-bottom:15px;text-align:center}
table{width:100%;border-collapse:collapse;font-size:0.9rem}
th,td{padding:12px 15px;text-align:center;border-bottom:1px solid #eee}
th{background:#f8f9fa;color:#555;font-weight:600;text-transform:uppercase;font-size:0.75rem;letter-spacing:0.5px}
tr:hover{background:#f8f9fa}
.positive-cell{color:#2ecc71;font-weight:600}
.negative-cell{color:#e74c3c;font-weight:600}
.legend{display:flex;justify-content:center;gap:20px;margin-top:10px;font-size:0.8rem}
.legend-item{display:flex;align-items:center;gap:5px}
.legend-color{width:12px;height:12px;border-radius:3px}
@media(max-width:768px){.filters{flex-direction:column;align-items:stretch}.filter-group{justify-content:space-between}.charts-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
<h1>ðŸ“Š RFQ-Dashboard 2020â€“2024</h1>
<div class="filters">
<div class="filter-group">
<label for="yearSelect">Jahr:</label>
<select id="yearSelect">
<option value="">Alle Jahre</option>
<option value="2020">2020</option>
<option value="2021">2021</option>
<option value="2022">2022</option>
<option value="2023">2023</option>
<option value="2024">2024</option>
</select>
</div>
<div class="filter-group">
<label for="monthSelect">Monat:</label>
<select id="monthSelect" disabled>
<option value="">Alle Monate</option>
<option value="1">Januar</option>
<option value="2">Februar</option>
<option value="3">MÃ¤rz</option>
<option value="4">April</option>
<option value="5">Mai</option>
<option value="6">Juni</option>
<option value="7">Juli</option>
<option value="8">August</option>
<option value="9">September</option>
<option value="10">Oktober</option>
<option value="11">November</option>
<option value="12">Dezember</option>
</select>
</div>
<button class="btn btn-primary" id="applyBtn">AusfÃ¼hren</button>
<button class="btn btn-danger" id="resetBtn">Reset</button>
</div>
<div class="status-box" id="statusBox">ðŸ“Š Alle Daten (2020â€“2024) | Vergleich: 2023 vs. 2024</div>
<div class="kpi-grid">
<div class="kpi-card kpi-blue">
<h3>Gesamt RFQs</h3>
<div class="kpi-value" id="totalRfqs">0</div>
</div>
<div class="kpi-card">
<h3>Vergleich Aktuell vs. Vorjahr</h3>
<div class="kpi-sub">
<span><span class="label">Aktuell</span><strong id="currentVal" style="color:#2ecc71">0</strong></span>
<span><span class="label">Vorjahr</span><strong id="prevVal" style="color:#e74c3c">0</strong></span>
</div>
<div class="kpi-diff" id="diffBox">Differenz: 0 (0%)</div>
</div>
<div class="kpi-card kpi-orange">
<h3>Lieferanten</h3>
<div class="kpi-value">2.221</div>
</div>
</div>
<div class="charts-grid">
<div class="chart-card">
<h3>RFQs pro Jahr</h3>
<div class="chart-container" id="barChartContainer"></div>
</div>
<div class="chart-card">
<h3>Prozentanteile</h3>
<div class="chart-container" id="pieChartContainer"></div>
</div>
</div>
<div class="chart-card" style="margin-bottom:20px">
<h3>Monatsvergleich (Aktuell vs. Vorjahr)</h3>
<div class="chart-container" id="comboChartContainer"></div>
<div class="legend">
<div class="legend-item"><div class="legend-color" style="background:#3498db"></div>Aktuelles Jahr</div>
<div class="legend-item"><div class="legend-color" style="background:#e74c3c"></div>Vorjahr</div>
</div>
</div>
<div class="table-container">
<h3 id="tableTitle">MonatsÃ¼bersicht</h3>
<table>
<thead>
<tr>
<th>Monat</th>
<th id="thCurrent">ðŸŸ¢ Aktuell</th>
<th id="thPrev">ðŸ”´ Vorjahr</th>
<th>Differenz</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>
</div>
<script>
const rawData={2020:{1:0,2:17,3:34,4:16,5:37,6:199,7:306,8:224,9:284,10:358,11:430,12:435},2021:{1:599,2:758,3:909,4:878,5:817,6:824,7:977,8:639,9:896,10:911,11:871,12:741},2022:{1:743,2:1115,3:1166,4:798,5:947,6:991,7:1074,8:629,9:894,10:951,11:897,12:774},2023:{1:799,2:817,3:1020,4:816,5:1027,6:1030,7:1072,8:694,9:947,10:962,11:1014,12:747},2024:{1:958,2:1068,3:1050,4:188,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0}};
const monthNames=['Jan','Feb','MÃ¤r','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Dez'];
const fmt=n=>n.toLocaleString('de-DE');
function getYearTotal(y){return Object.values(rawData[y]||{}).reduce((a,b)=>a+b,0);}
function getAllTotal(){return Object.keys(rawData).reduce((s,y)=>s+getYearTotal(parseInt(y)),0);}
const yearSelect=document.getElementById('yearSelect');
const monthSelect=document.getElementById('monthSelect');
const applyBtn=document.getElementById('applyBtn');
const resetBtn=document.getElementById('resetBtn');
yearSelect.addEventListener('change',()=>{monthSelect.disabled=!yearSelect.value;if(!yearSelect.value)monthSelect.value='';});
applyBtn.addEventListener('click',updateDashboard);
resetBtn.addEventListener('click',()=>{yearSelect.value='';monthSelect.value='';monthSelect.disabled=true;updateDashboard();});
function updateDashboard(){
const y=yearSelect.value?parseInt(yearSelect.value):null;
const m=monthSelect.value?parseInt(monthSelect.value):null;
let total,current,prev,currentLabel,prevLabel,statusText;
if(!y){
total=getAllTotal();
current=getYearTotal(2024);prev=getYearTotal(2023);
currentLabel='2024';prevLabel='2023';
statusText='ðŸ“Š Alle Daten (2020â€“2024) | Vergleich: 2023 vs. 2024';
}else if(y&&!m){
total=getYearTotal(y);current=total;prev=getYearTotal(y-1);
currentLabel=y.toString();prevLabel=(y-1).toString();
statusText=`âœ… Jahr ${y} (${fmt(total)} RFQs) | Vergleich: ${y-1}`;
}else{
total=(rawData[y]&&rawData[y][m])||0;
current=total;prev=(rawData[y-1]&&rawData[y-1][m])||0;
currentLabel=`${monthNames[m-1]} ${y}`;prevLabel=`${monthNames[m-1]} ${y-1}`;
statusText=`âœ… ${monthNames[m-1]} ${y} (${fmt(total)} RFQs) | Vergleich: ${monthNames[m-1]} ${y-1}`;
}
document.getElementById('statusBox').textContent=statusText;
document.getElementById('totalRfqs').textContent=fmt(total);
document.getElementById('currentVal').textContent=fmt(current);
document.getElementById('prevVal').textContent=fmt(prev);
const diff=current-prev;
const pct=prev>0?((diff/prev)*100).toFixed(1):current>0?'âˆž':'0';
const diffBox=document.getElementById('diffBox');
diffBox.textContent=`Differenz: ${diff>=0?'+':''}${fmt(diff)} (${pct}%)`;
diffBox.className='kpi-diff '+(diff>=0?'positive':'negative');
drawBarChart(y,m,currentLabel,prevLabel);
drawPieChart(y,m,currentLabel,prevLabel,current,prev);
drawComboChart(y||2024);
updateTable(y||2024,currentLabel,prevLabel);
}
function drawBarChart(y,m,cl,pl){
const container=document.getElementById('barChartContainer');
let data=[];
if(!y){for(let yr=2020;yr<=2024;yr++)data.push({label:yr.toString(),value:getYearTotal(yr)});}
else if(y&&!m){data=[{label:pl,value:getYearTotal(y-1)},{label:cl,value:getYearTotal(y)}];}
else{data=[{label:pl,value:(rawData[y-1]&&rawData[y-1][m])||0},{label:cl,value:(rawData[y]&&rawData[y][m])||0}];}
const w=Math.max(400,data.length*80),h=250,pad=50,barW=Math.min(50,(w-pad*2)/data.length-20);
const maxV=Math.max(...data.map(d=>d.value),1);
const gridMax=Math.ceil(maxV/3000)*3000||9000;
const gridLines=[0,gridMax/3,gridMax*2/3,gridMax];
let svg=`<svg width="${w}" height="${h}" viewBox="0 0 ${w} ${h}">`;
svg+=`<line x1="${pad}" y1="${h-pad}" x2="${w-pad}" y2="${h-pad}" stroke="#ddd" stroke-width="1"/>`;
gridLines.forEach(g=>{
const yPos=h-pad-((g/gridMax)*(h-pad*2));
svg+=`<line x1="${pad}" y1="${yPos}" x2="${w-pad}" y2="${yPos}" stroke="#eee" stroke-width="1"/>`;
svg+=`<text x="${pad-5}" y="${yPos+4}" text-anchor="end" font-size="10" fill="#888">${g>=1000?(g/1000)+'K':g}</text>`;
});
data.forEach((d,i)=>{
const x=pad+20+i*((w-pad*2-40)/data.length)+(w-pad*2-40)/data.length/2-barW/2;
const barH=(d.value/gridMax)*(h-pad*2);
const yPos=h-pad-barH;
const colors=['#3498db','#2ecc71','#e74c3c','#f39c12','#9b59b6'];
svg+=`<rect x="${x}" y="${yPos}" width="${barW}" height="${barH}" fill="${colors[i%5]}" rx="4"/>`;
svg+=`<text x="${x+barW/2}" y="${yPos-5}" text-anchor="middle" font-size="11" font-weight="600" fill="#333">${fmt(d.value)}</text>`;
svg+=`<text x="${x+barW/2}" y="${h-pad+15}" text-anchor="middle" font-size="11" fill="#555">${d.label}</text>`;
});
svg+=`</svg>`;
container.innerHTML=svg;
}
function drawPieChart(y,m,cl,pl,current,prev){
const container=document.getElementById('pieChartContainer');
let data=[];
if(!y){for(let yr=2020;yr<=2024;yr++)data.push({label:yr.toString(),value:getYearTotal(yr)});}
else{data=[{label:pl,value:prev},{label:cl,value:current}];}
const total=data.reduce((s,d)=>s+d.value,0)||1;
const w=350,h=280,cx=w/2,cy=130,r=90;
const colors=['#3498db','#2ecc71','#e74c3c','#f39c12','#9b59b6'];
let svg=`<svg width="${w}" height="${h}" viewBox="0 0 ${w} ${h}">`;
let startAngle=-Math.PI/2;
data.forEach((d,i)=>{
const pct=d.value/total;
const angle=pct*2*Math.PI;
const endAngle=startAngle+angle;
const largeArc=angle>Math.PI?1:0;
const x1=cx+r*Math.cos(startAngle),y1=cy+r*Math.sin(startAngle);
const x2=cx+r*Math.cos(endAngle),y2=cy+r*Math.sin(endAngle);
if(pct>0)svg+=`<path d="M${cx},${cy} L${x1},${y1} A${r},${r} 0 ${largeArc},1 ${x2},${y2} Z" fill="${colors[i%5]}"/>`;
startAngle=endAngle;
});
let ly=h-80;
data.forEach((d,i)=>{
const pct=((d.value/total)*100).toFixed(1);
svg+=`<rect x="${w/2-80}" y="${ly}" width="12" height="12" fill="${colors[i%5]}" rx="2"/>`;
svg+=`<text x="${w/2-62}" y="${ly+10}" font-size="11" fill="#333">${d.label}: ${fmt(d.value)} (${pct}%)</text>`;
ly+=18;
});
svg+=`</svg>`;
container.innerHTML=svg;
}
function drawComboChart(y){
const container=document.getElementById('comboChartContainer');
const currentData=rawData[y]||{};
const prevData=rawData[y-1]||{};
const w=700,h=280,pad=50,barW=30;
const allVals=[...Object.values(currentData),...Object.values(prevData)];
const maxV=Math.max(...allVals,1);
const gridMax=Math.ceil(maxV/300)*300||1200;
let svg=`<svg width="${w}" height="${h}" viewBox="0 0 ${w} ${h}">`;
for(let g=0;g<=gridMax;g+=gridMax/4){
const yPos=h-pad-((g/gridMax)*(h-pad*2));
svg+=`<line x1="${pad}" y1="${yPos}" x2="${w-pad}" y2="${yPos}" stroke="#eee" stroke-width="1"/>`;
svg+=`<text x="${pad-5}" y="${yPos+4}" text-anchor="end" font-size="9" fill="#888">${g>=1000?(g/1000)+'K':g}</text>`;
}
const step=(w-pad*2)/12;
let linePath='',linePoints=[];
for(let m=1;m<=12;m++){
const x=pad+step*(m-0.5);
const cv=currentData[m]||0;
const pv=prevData[m]||0;
const barH=(cv/gridMax)*(h-pad*2);
const barY=h-pad-barH;
svg+=`<rect x="${x-barW/2}" y="${barY}" width="${barW}" height="${barH}" fill="#3498db" rx="3"/>`;
if(cv>0)svg+=`<text x="${x}" y="${barY-3}" text-anchor="middle" font-size="8" fill="#3498db">${fmt(cv)}</text>`;
const ly=h-pad-((pv/gridMax)*(h-pad*2));
linePoints.push({x,y:ly,v:pv});
if(m===1)linePath=`M${x},${ly}`;else linePath+=` L${x},${ly}`;
svg+=`<text x="${x}" y="${h-pad+12}" text-anchor="middle" font-size="9" fill="#555">${monthNames[m-1]}</text>`;
}
svg+=`<path d="${linePath}" fill="none" stroke="#e74c3c" stroke-width="2.5"/>`;
linePoints.forEach(p=>{
svg+=`<circle cx="${p.x}" cy="${p.y}" r="4" fill="#e74c3c"/>`;
if(p.v>0)svg+=`<text x="${p.x}" y="${p.y-8}" text-anchor="middle" font-size="8" fill="#e74c3c">${fmt(p.v)}</text>`;
});
svg+=`</svg>`;
container.innerHTML=svg;
}
function updateTable(y,cl,pl){
const tbody=document.getElementById('tableBody');
const currentData=rawData[y]||{};
const prevData=rawData[y-1]||{};
document.getElementById('thCurrent').textContent=`ðŸŸ¢ ${y}`;
document.getElementById('thPrev').textContent=`ðŸ”´ ${y-1}`;
let html='';
for(let m=1;m<=12;m++){
const cv=currentData[m]||0;
const pv=prevData[m]||0;
const diff=cv-pv;
const diffClass=diff>=0?'positive-cell':'negative-cell';
html+=`<tr><td>${monthNames[m-1]}</td><td>${fmt(cv)}</td><td>${fmt(pv)}</td><td class="${diffClass}">${diff>=0?'+':''}${fmt(diff)}</td></tr>`;
}
tbody.innerHTML=html;
}
updateDashboard();
</script>
</body>
</html>