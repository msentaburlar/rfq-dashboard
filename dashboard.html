<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RFQ-Dashboard 2020-2024</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#f0f2f5;color:#333;padding:20px}
.dashboard{max-width:1400px;margin:0 auto}
h1{text-align:center;color:#2c3e50;margin-bottom:20px;font-size:28px}
.filter-section{background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:20px;display:flex;gap:20px;align-items:center;flex-wrap:wrap}
.filter-group{display:flex;flex-direction:column;gap:5px}
.filter-group label{font-weight:600;color:#555;font-size:14px}
.filter-group select{padding:10px 15px;border:2px solid #ddd;border-radius:8px;font-size:14px;min-width:180px;cursor:pointer;transition:border-color 0.3s}
.filter-group select:focus{outline:none;border-color:#3498db}
.filter-group select:disabled{background:#f5f5f5;cursor:not-allowed;color:#999}
.btn{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.3s}
.btn-execute{background:#3498db;color:#fff}
.btn-execute:hover{background:#2980b9}
.btn-reset{background:#e74c3c;color:#fff}
.btn-reset:hover{background:#c0392b}
.status-box{background:#ecf0f1;padding:12px 20px;border-radius:8px;font-size:14px;flex-grow:1;text-align:center}
.kpi-section{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:20px}
.kpi-card{background:#fff;padding:25px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1);text-align:center}
.kpi-card h3{font-size:14px;color:#777;margin-bottom:10px;text-transform:uppercase}
.kpi-card .value{font-size:36px;font-weight:700}
.kpi-card.blue .value{color:#3498db}
.kpi-card.orange .value{color:#f39c12}
.kpi-split{display:flex;justify-content:center;gap:20px;margin-bottom:15px}
.kpi-split-item{text-align:center}
.kpi-split-item .label{font-size:12px;color:#777;margin-bottom:5px}
.kpi-split-item .val{font-size:28px;font-weight:700}
.kpi-split-item .val.green{color:#2ecc71}
.kpi-split-item .val.red{color:#e74c3c}
.kpi-vs{font-size:20px;color:#999;align-self:center}
.kpi-diff{display:flex;justify-content:center;gap:30px;padding-top:10px;border-top:1px solid #eee}
.kpi-diff-item{font-size:16px;font-weight:600}
.charts-section{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:20px}
.chart-card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
.chart-card h3{font-size:16px;color:#555;margin-bottom:15px;text-align:center}
.chart-container{width:100%;height:300px;position:relative}
.chart-placeholder{display:flex;justify-content:center;align-items:center;height:100%;color:#999;font-size:18px;background:#f9f9f9;border-radius:8px}
.table-section{background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
.table-section h3{font-size:16px;color:#555;margin-bottom:15px;text-align:center}
table{width:100%;border-collapse:collapse}
th,td{padding:12px;text-align:center;border-bottom:1px solid #eee}
th{background:#f8f9fa;font-weight:600;color:#555}
tr:hover{background:#f5f5f5}
.highlight-row{background:#fff9e6 !important}
.positive{color:#2ecc71;font-weight:600}
.negative{color:#e74c3c;font-weight:600}
svg text{font-family:'Segoe UI',sans-serif}
@media(max-width:900px){.kpi-section,.charts-section{grid-template-columns:1fr}.filter-section{flex-direction:column;align-items:stretch}}
</style>
</head>
<body>
<div class="dashboard">
<h1>üìä RFQ-Dashboard 2020-2024</h1>
<div class="filter-section">
<div class="filter-group">
<label>Jahr</label>
<select id="yearFilter">
<option value="">Alle Jahre</option>
<option value="2020">2020</option>
<option value="2021">2021</option>
<option value="2022">2022</option>
<option value="2023">2023</option>
<option value="2024">2024</option>
</select>
</div>
<div class="filter-group">
<label>Monat</label>
<select id="monthFilter" disabled>
<option value="">Alle Monate</option>
<option value="1">Januar</option>
<option value="2">Februar</option>
<option value="3">M√§rz</option>
<option value="4">April</option>
<option value="5">Mai</option>
<option value="6">Juni</option>
<option value="7">Juli</option>
<option value="8">August</option>
<option value="9">September</option>
<option value="10">Oktober</option>
<option value="11">November</option>
<option value="12">Dezember</option>
</select>
</div>
<button class="btn btn-execute" onclick="applyFilters()">üîç Ausf√ºhren</button>
<button class="btn btn-reset" onclick="resetFilters()">‚Üª Zur√ºcksetzen</button>
<div class="status-box" id="statusBox">üìä Zeige: Alle Daten (37.348 RFQs)</div>
</div>
<div class="kpi-section">
<div class="kpi-card blue">
<h3>Gesamt RFQs</h3>
<div class="value" id="kpiTotal">37.348</div>
</div>
<div class="kpi-card">
<h3 id="kpiCompareTitle">Vergleich</h3>
<div class="kpi-split">
<div class="kpi-split-item">
<div class="label" id="labelCurrent">2024</div>
<div class="val green" id="valCurrent">3.264</div>
</div>
<div class="kpi-vs">vs.</div>
<div class="kpi-split-item">
<div class="label" id="labelPrevious">2023</div>
<div class="val red" id="valPrevious">10.945</div>
</div>
</div>
<div class="kpi-diff">
<div class="kpi-diff-item" id="diffAbsolute">-7.681 RFQs</div>
<div class="kpi-diff-item" id="diffPercent">-70,2%</div>
</div>
</div>
<div class="kpi-card orange">
<h3>Lieferanten</h3>
<div class="value">2.221</div>
</div>
</div>
<div class="charts-section">
<div class="chart-card">
<h3 id="barChartTitle">RFQs pro Jahr</h3>
<div class="chart-container" id="barChart"></div>
</div>
<div class="chart-card">
<h3 id="pieChartTitle">Prozentanteile</h3>
<div class="chart-container" id="pieChart"></div>
</div>
<div class="chart-card" style="grid-column:span 2">
<h3 id="combiChartTitle">Monatlicher Vergleich</h3>
<div class="chart-container" id="combiChart"></div>
</div>
</div>
<div class="table-section">
<h3 id="tableTitle">Monatliche Vergleichstabelle: 2024 vs. 2023</h3>
<table id="comparisonTable">
<thead>
<tr>
<th>Monat</th>
<th id="thCurrent">2024 üü¢</th>
<th id="thPrevious">2023 üî¥</th>
<th>Differenz</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>
</div>
<script>
const yearlyData={2020:2340,2021:9820,2022:10979,2023:10945,2024:3264};
const monthlyData={
2020:[0,0,17,34,16,37,199,306,224,284,358,430,435],
2021:[0,599,758,909,878,817,824,977,639,896,911,871,741],
2022:[0,743,1115,1166,798,947,991,1074,629,894,951,897,774],
2023:[0,799,817,1020,816,1027,1030,1072,694,947,962,1014,747],
2024:[0,958,1068,1050,188,0,0,0,0,0,0,0,0]
};
const monthNames=['','Januar','Februar','M√§rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'];
const colors={2020:'#9b59b6',2021:'#3498db',2022:'#e74c3c',2023:'#2ecc71',2024:'#f39c12'};
let currentYear=null,currentMonth=null;
function fmt(n){return n.toLocaleString('de-DE')}
function getPrevYear(y){return y-1}
document.getElementById('yearFilter').addEventListener('change',function(){const m=document.getElementById('monthFilter');if(this.value){m.disabled=false}else{m.disabled=true;m.value=''}});
function applyFilters(){
currentYear=document.getElementById('yearFilter').value?parseInt(document.getElementById('yearFilter').value):null;
currentMonth=document.getElementById('monthFilter').value?parseInt(document.getElementById('monthFilter').value):null;
updateDashboard();
}
function resetFilters(){
document.getElementById('yearFilter').value='';
document.getElementById('monthFilter').value='';
document.getElementById('monthFilter').disabled=true;
currentYear=null;
currentMonth=null;
updateDashboard();
}
function updateDashboard(){
updateKPIs();
updateBarChart();
updatePieChart();
updateCombiChart();
updateTable();
updateStatus();
}
function updateKPIs(){
let total,current,previous,labelC,labelP,prevY;
if(!currentYear){
total=Object.values(yearlyData).reduce((a,b)=>a+b,0);
current=yearlyData[2024];previous=yearlyData[2023];
labelC='2024';labelP='2023';
}else if(!currentMonth){
total=yearlyData[currentYear]||0;
prevY=getPrevYear(currentYear);
current=yearlyData[currentYear]||0;
previous=yearlyData[prevY]||0;
labelC=currentYear.toString();labelP=prevY.toString();
}else{
prevY=getPrevYear(currentYear);
total=(monthlyData[currentYear]&&monthlyData[currentYear][currentMonth])||0;
current=total;
previous=(monthlyData[prevY]&&monthlyData[prevY][currentMonth])||0;
labelC=monthNames[currentMonth]+' '+currentYear;
labelP=monthNames[currentMonth]+' '+prevY;
}
document.getElementById('kpiTotal').textContent=fmt(total);
document.getElementById('labelCurrent').textContent=labelC;
document.getElementById('valCurrent').textContent=fmt(current);
document.getElementById('labelPrevious').textContent=labelP;
document.getElementById('valPrevious').textContent=fmt(previous);
const diff=current-previous;
const pct=previous>0?((diff/previous)*100):0;
const diffEl=document.getElementById('diffAbsolute');
const pctEl=document.getElementById('diffPercent');
diffEl.textContent=(diff>=0?'+':'')+fmt(diff)+' RFQs';
diffEl.className='kpi-diff-item '+(diff>=0?'positive':'negative');
pctEl.textContent=(pct>=0?'+':'')+pct.toFixed(1).replace('.',',')+'%';
pctEl.className='kpi-diff-item '+(pct>=0?'positive':'negative');
}
function updateBarChart(){
const c=document.getElementById('barChart');
let data=[],title='RFQs pro Jahr';
if(!currentYear){
for(let y=2020;y<=2024;y++)data.push({label:y.toString(),value:yearlyData[y],color:colors[y]});
}else{
const prevY=getPrevYear(currentYear);
if(!currentMonth){
data=[{label:prevY.toString(),value:yearlyData[prevY]||0,color:'#e74c3c'},{label:currentYear.toString(),value:yearlyData[currentYear]||0,color:'#2ecc71'}];
title=currentYear+' vs. '+prevY;
}else{
const mName=monthNames[currentMonth];
data=[{label:mName+' '+prevY,value:(monthlyData[prevY]&&monthlyData[prevY][currentMonth])||0,color:'#e74c3c'},{label:mName+' '+currentYear,value:(monthlyData[currentYear]&&monthlyData[currentYear][currentMonth])||0,color:'#2ecc71'}];
title=mName+' '+currentYear+' vs. '+mName+' '+prevY;
}}
document.getElementById('barChartTitle').textContent=title;
const w=c.clientWidth,h=c.clientHeight;
const maxVal=Math.max(...data.map(d=>d.value),1);
const barW=Math.min(80,w/(data.length*2));
const gap=(w-barW*data.length)/(data.length+1);
const chartH=h-60;
let svg='<svg width="'+w+'" height="'+h+'">';
for(let i=0;i<=4;i++){
const y=30+chartH-chartH*i/4;
const val=Math.round(maxVal*i/4/1000);
svg+='<line x1="40" y1="'+y+'" x2="'+(w-10)+'" y2="'+y+'" stroke="#eee" stroke-width="1"/>';
svg+='<text x="35" y="'+(y+4)+'" font-size="11" fill="#999" text-anchor="end">'+val+'K</text>';
}
data.forEach((d,i)=>{
const x=gap+(gap+barW)*i;
const bh=(d.value/maxVal)*chartH;
const y=30+chartH-bh;
svg+='<rect x="'+x+'" y="'+y+'" width="'+barW+'" height="'+bh+'" fill="'+d.color+'" rx="4"/>';
svg+='<text x="'+(x+barW/2)+'" y="'+(y-5)+'" font-size="12" fill="#333" text-anchor="middle" font-weight="600">'+fmt(d.value)+'</text>';
svg+='<text x="'+(x+barW/2)+'" y="'+(h-5)+'" font-size="11" fill="#666" text-anchor="middle">'+d.label+'</text>';
});
svg+='</svg>';
c.innerHTML=svg;
}
function updatePieChart(){
const c=document.getElementById('pieChart');
let data=[],title='Prozentanteile nach Jahr';
if(!currentYear){
const total=Object.values(yearlyData).reduce((a,b)=>a+b,0);
for(let y=2020;y<=2024;y++)data.push({label:y.toString(),value:yearlyData[y],pct:(yearlyData[y]/total*100).toFixed(1),color:colors[y]});
}else{
const prevY=getPrevYear(currentYear);
let v1,v2,l1,l2;
if(!currentMonth){
v1=yearlyData[currentYear]||0;v2=yearlyData[prevY]||0;
l1=currentYear.toString();l2=prevY.toString();
title='Anteil: '+currentYear+' vs. '+prevY;
}else{
v1=(monthlyData[currentYear]&&monthlyData[currentYear][currentMonth])||0;
v2=(monthlyData[prevY]&&monthlyData[prevY][currentMonth])||0;
l1=monthNames[currentMonth]+' '+currentYear;
l2=monthNames[currentMonth]+' '+prevY;
title='Anteil: '+l1+' vs. '+l2;
}
const t=v1+v2||1;
data=[{label:l1,value:v1,pct:(v1/t*100).toFixed(1),color:'#2ecc71'},{label:l2,value:v2,pct:(v2/t*100).toFixed(1),color:'#e74c3c'}];
}
document.getElementById('pieChartTitle').textContent=title;
const w=c.clientWidth,h=c.clientHeight;
const cx=w/2-60,cy=h/2,r=Math.min(cx,cy)-20;
let svg='<svg width="'+w+'" height="'+h+'">';
let startAngle=-90;
const total=data.reduce((a,b)=>a+b.value,0)||1;
data.forEach((d,i)=>{
const angle=(d.value/total)*360;
const endAngle=startAngle+angle;
const largeArc=angle>180?1:0;
const x1=cx+r*Math.cos(startAngle*Math.PI/180);
const y1=cy+r*Math.sin(startAngle*Math.PI/180);
const x2=cx+r*Math.cos(endAngle*Math.PI/180);
const y2=cy+r*Math.sin(endAngle*Math.PI/180);
if(angle>0){
svg+='<path d="M '+cx+' '+cy+' L '+x1+' '+y1+' A '+r+' '+r+' 0 '+largeArc+' 1 '+x2+' '+y2+' Z" fill="'+d.color+'"/>';
}
startAngle=endAngle;
});
let ly=30;
data.forEach((d,i)=>{
svg+='<rect x="'+(w-130)+'" y="'+ly+'" width="15" height="15" fill="'+d.color+'" rx="2"/>';
svg+='<text x="'+(w-110)+'" y="'+(ly+12)+'" font-size="12" fill="#333">'+d.label+': '+d.pct+'%</text>';
ly+=25;
});
svg+='</svg>';
c.innerHTML=svg;
}
function updateCombiChart(){
const c=document.getElementById('combiChart');
if(!currentYear){
c.innerHTML='<div class="chart-placeholder">üìÖ W√§hlen Sie ein Jahr und klicken Sie "Ausf√ºhren"</div>';
document.getElementById('combiChartTitle').textContent='Monatlicher Vergleich';
return;
}
const prevY=getPrevYear(currentYear);
document.getElementById('combiChartTitle').textContent='Monatlicher Vergleich '+currentYear+' vs. '+prevY;
const w=c.clientWidth,h=c.clientHeight;
const currentData=monthlyData[currentYear]||new Array(13).fill(0);
const prevData=monthlyData[prevY]||new Array(13).fill(0);
const allVals=[...currentData.slice(1),...prevData.slice(1)];
const maxVal=Math.max(...allVals,1);
const chartH=h-70;
const chartW=w-80;
const barW=chartW/12-8;
let svg='<svg width="'+w+'" height="'+h+'">';
for(let i=0;i<=4;i++){
const y=30+chartH-chartH*i/4;
const val=Math.round(maxVal*i/4);
svg+='<line x1="60" y1="'+y+'" x2="'+(w-10)+'" y2="'+y+'" stroke="#eee" stroke-width="1"/>';
svg+='<text x="55" y="'+(y+4)+'" font-size="10" fill="#999" text-anchor="end">'+fmt(val)+'</text>';
}
let linePoints=[];
for(let m=1;m<=12;m++){
const x=60+(m-1)*(chartW/12)+barW/2;
const cv=currentData[m]||0;
const pv=prevData[m]||0;
const bh=(cv/maxVal)*chartH;
const by=30+chartH-bh;
const isHighlight=currentMonth&&currentMonth===m;
svg+='<rect x="'+(x-barW/2)+'" y="'+by+'" width="'+barW+'" height="'+bh+'" fill="'+(isHighlight?'#27ae60':'#2ecc71')+'" rx="3" opacity="'+(isHighlight?1:0.8)+'"/>';
if(cv>0)svg+='<text x="'+x+'" y="'+(by-3)+'" font-size="9" fill="#2ecc71" text-anchor="middle" font-weight="600">'+fmt(cv)+'</text>';
const ly=30+chartH-(pv/maxVal)*chartH;
linePoints.push({x:x,y:ly,v:pv});
svg+='<text x="'+x+'" y="'+(h-5)+'" font-size="9" fill="#666" text-anchor="middle">'+monthNames[m].substr(0,3)+'</text>';
}
if(linePoints.length>1){
let path='M '+linePoints[0].x+' '+linePoints[0].y;
for(let i=1;i<linePoints.length;i++)path+=' L '+linePoints[i].x+' '+linePoints[i].y;
svg+='<path d="'+path+'" fill="none" stroke="#e74c3c" stroke-width="2"/>';
}
linePoints.forEach(p=>{
svg+='<circle cx="'+p.x+'" cy="'+p.y+'" r="4" fill="#e74c3c"/>';
if(p.v>0)svg+='<text x="'+p.x+'" y="'+(p.y-8)+'" font-size="9" fill="#e74c3c" text-anchor="middle">'+fmt(p.v)+'</text>';
});
svg+='<rect x="'+(w-150)+'" y="10" width="12" height="12" fill="#2ecc71" rx="2"/><text x="'+(w-133)+'" y="20" font-size="11" fill="#333">'+currentYear+'</text>';
svg+='<line x1="'+(w-150)+'" y1="35" x2="'+(w-138)+'" y2="35" stroke="#e74c3c" stroke-width="2"/><circle cx="'+(w-144)+'" cy="35" r="3" fill="#e74c3c"/><text x="'+(w-133)+'" y="39" font-size="11" fill="#333">'+prevY+'</text>';
svg+='</svg>';
c.innerHTML=svg;
}
function updateTable(){
const tbody=document.getElementById('tableBody');
let year1=currentYear||2024;
let year2=getPrevYear(year1);
document.getElementById('tableTitle').textContent='Monatliche Vergleichstabelle: '+year1+' vs. '+year2;
document.getElementById('thCurrent').textContent=year1+' üü¢';
document.getElementById('thPrevious').textContent=year2+' üî¥';
const d1=monthlyData[year1]||new Array(13).fill(0);
const d2=monthlyData[year2]||new Array(13).fill(0);
let html='';
for(let m=1;m<=12;m++){
const v1=d1[m]||0;
const v2=d2[m]||0;
const diff=v1-v2;
const isHighlight=currentMonth&&currentMonth===m;
html+='<tr class="'+(isHighlight?'highlight-row':'')+'">';
html+='<td>'+monthNames[m]+'</td>';
html+='<td>'+fmt(v1)+'</td>';
html+='<td>'+fmt(v2)+'</td>';
html+='<td class="'+(diff>=0?'positive':'negative')+'">'+(diff>=0?'+':'')+fmt(diff)+'</td>';
html+='</tr>';
}
tbody.innerHTML=html;
}
function updateStatus(){
const s=document.getElementById('statusBox');
let total;
if(!currentYear){
total=Object.values(yearlyData).reduce((a,b)=>a+b,0);
s.textContent='üìä Zeige: Alle Daten ('+fmt(total)+' RFQs)';
}else if(!currentMonth){
total=yearlyData[currentYear]||0;
s.textContent='‚úÖ Zeige: Jahr '+currentYear+' ('+fmt(total)+' RFQs)';
}else{
total=(monthlyData[currentYear]&&monthlyData[currentYear][currentMonth])||0;
s.textContent='‚úÖ Zeige: '+monthNames[currentMonth]+' '+currentYear+' ('+fmt(total)+' RFQs)';
}}
updateDashboard();
window.addEventListener('resize',()=>{updateBarChart();updatePieChart();updateCombiChart();});
</script>
</body>
</html>